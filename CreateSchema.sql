USE MASTER
IF EXISTS
(
	SELECT *
	FROM SYS.DATABASES
	WHERE NAME = 'comercioDB'
)

ALTER DATABASE comercioDB SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
DROP DATABASE comercioDB
GO
CREATE DATABASE comercioDB
GO

USE comercioDB
GO

/*Users*/
IF EXISTS
(
    SELECT *
    FROM SYS.DATABASE_PRINCIPALS
    WHERE NAME ='usuario1'
)
DROP USER usuario1
GO
IF EXISTS
(
    SELECT *
    FROM SYS.SERVER_PRINCIPALS
    WHERE NAME ='usuario1'
)
DROP LOGIN usuario1
GO
CREATE LOGIN usuario1 WITH PASSWORD ='usuario1'
GO
CREATE USER usuario1 FOR LOGIN usuario1
GO

/*Schemas*/
IF EXISTS 
(
    SELECT name
    FROM SYS.SCHEMAS
    WHERE NAME = 'Ventas'
)
DROP SCHEMA Ventas
GO
CREATE SCHEMA Ventas AUTHORIZATION usuario1
GO

IF EXISTS 
(
    SELECT name
    FROM SYS.SCHEMAS
    WHERE NAME = 'Inventario'
)
DROP SCHEMA Inventario
GO
CREATE SCHEMA Inventario AUTHORIZATION usuario1
GO

IF EXISTS
(
    SELECT * 
    FROM SYS.SCHEMAS
    WHERE NAME = 'Opiniones'
)
DROP SCHEMA Opiniones
GO
CREATE SCHEMA Opiniones AUTHORIZATION usuario1
GO

/*DataType*/

IF EXISTS
(
    SELECT *
    FROM SYS.TYPES
    WHERE NAME = 'ID_TIPO'
)
DROP TYPE ID_TIPO
GO
CREATE TYPE ID_TIPO FROM SMELL NOT NULL